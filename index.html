<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mir Moeez — Portfolio</title>
  <meta name="description" content="Full Stack Developer & Problem Solver building accessible, user-friendly web experiences." />
  <meta name="color-scheme" content="light dark">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
  <script>
    // 1) Inline, early theme script to avoid flash of wrong theme
    (function(){
      const STORAGE_KEY = "theme-preference";
      const stored = localStorage.getItem(STORAGE_KEY) || "auto";
      document.documentElement.setAttribute("data-theme", stored);
    })();
  </script>
  <style>
    /* Bigger social media icons */
.social-link i {
  font-size: 28px; /* try 28–36px as you like */
}
.social-link {
  width: 48px;
  height: 48px;
}

    :root{
      --bg: #0b0c10;
      --surface: #111317;
      --text: #e6e6e6;
      --muted: #a9b0b8;
      --border: #1d222b;
      --brand: #5dd3ff;
      --brand-2: #8ef6d4;
      --radius: 14px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      color-scheme: dark light;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#ffffff; --surface:#f6f8fb; --text:#111317; --muted:#4a5568; --border:#e6eaf0; }
    }
    html[data-theme="light"] :root{
      --bg:#ffffff; --surface:#f6f8fb; --text:#111317; --muted:#4a5568; --border:#e6eaf0;
    }
    html[data-theme="dark"] :root{
      --bg:#0b0c10; --surface:#111317; --text:#e6e6e6; --muted:#a9b0b8; --border:#1d222b;
    }

    *{ box-sizing:border-box }
    html,body{ margin:0; padding:0 }
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
      background: radial-gradient(1200px 1200px at 10% -10%, color-mix(in oklab, var(--brand) 10%, transparent) 0%, transparent 60%), var(--bg);
      color: var(--text);
      line-height: 1.6;
    }
    img{ max-width:100%; display:block; height:auto }

    .container{ width:min(1100px,92vw); margin-inline:auto }
    .section{ padding: clamp(56px,8vw,100px) 0 }

    /* Header + Nav */
    .site-header{
      position: sticky; top:0; z-index:100;
      backdrop-filter: blur(8px);
      background: color-mix(in oklab, var(--bg), transparent 20%);
      border-bottom:1px solid var(--border);
    }
    .navbar{
      display:grid; grid-template-columns: 1fr auto auto; align-items:center; gap:12px;
      width:min(1100px,92vw); margin-inline:auto; padding:12px 0;
    }
    .nav-logo{ text-decoration:none; color:var(--text); font-weight:700; letter-spacing:.3px }
    .nav-menu{ list-style:none; margin:0; padding:0; display:flex; gap: clamp(8px,3vw,28px) }
    .nav-link{ text-decoration:none; color:var(--text); padding:10px 12px; border-radius:10px; border:1px solid transparent }
    .nav-link:hover,.nav-link:focus-visible{ border-color:var(--border); background: color-mix(in oklab, var(--surface), transparent 10%) }

    .nav-actions{ display:flex; gap:10px; align-items:center }

    .icon-btn{
      width:42px; height:42px; display:grid; place-items:center; border-radius:10px;
      border:1px solid var(--border); background: var(--surface); color:var(--text); cursor:pointer
    }

    .nav-toggle{
      width:44px; height:44px; display:grid; place-items:center; border-radius:10px;
      border:1px solid var(--border); background: var(--surface); color:var(--text); cursor:pointer
    }
    .nav-toggle .bar{ width:20px; height:2px; background:var(--text); display:block; }
    .nav-toggle .bar + .bar{ margin-top:3px }

    /* Mobile menu */
    @media (max-width: 820px){
      .navbar{ grid-template-columns: 1fr auto auto }
      .nav-menu{
        grid-column: 1/-1; flex-direction:column; display:none; background:var(--surface);
        border:1px solid var(--border); border-radius:14px; padding:10px
      }
      .nav-menu.open{ display:flex }
    }

    /* Skip */
    .skip-link{
      position:absolute; top:-40px; left:8px; background:var(--surface); color:var(--text);
      padding:8px 12px; border-radius:8px; box-shadow:var(--shadow); transition: top .2s; z-index:1000;
    }
    .skip-link:focus{ top:8px }

    /* Hero */
    .hero-grid{ display:grid; grid-template-columns:1.2fr .8fr; gap:clamp(20px,5vw,60px); align-items:center }
    @media (max-width:820px){ .hero-grid{ grid-template-columns:1fr } }
    .hero-title{ font-size: clamp(32px,6vw,56px); line-height:1.05; margin:0 0 10px }
    .highlight{ color:var(--brand); text-shadow:0 6px 22px color-mix(in oklab, var(--brand) 30%, transparent) }
    .hero-subtitle{ margin:0 0 10px; font-weight:600; color:var(--muted) }
    .hero-description{ margin:0 0 22px; max-width:56ch }
    .hero-actions{ display:flex; gap:12px; flex-wrap:wrap }
    .hero-figure{ margin:0; justify-self:center; border-radius:20px; overflow:hidden; border:1px solid var(--border); box-shadow:var(--shadow) }
    .hero-figure img{ aspect-ratio:1/1; object-fit:cover }

    /* Buttons */
    .btn{
      --btn-bg: var(--surface); --btn-brd: var(--border); --btn-fg: var(--text);
      display:inline-block; padding:12px 16px; border-radius:12px; text-decoration:none;
      color:var(--btn-fg); background:var(--btn-bg); border:1px solid var(--btn-brd);
      transition: transform .06s ease, background .2s;
    }
    .btn:active{ transform: translateY(1px) }
    .btn-primary{
      --btn-bg: linear-gradient(135deg, var(--brand), var(--brand-2));
      --btn-brd: transparent; color:#0b0c10; font-weight:700;
    }
    .btn-secondary{ background: color-mix(in oklab, var(--surface), transparent 8%) }

    /* About */
    .about-grid{ display:grid; grid-template-columns:1fr .7fr; gap: clamp(20px,4vw,48px) }
    @media (max-width:900px){ .about-grid{ grid-template-columns:1fr } }
    .stats{ list-style:none; margin:22px 0 0; padding:0; display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:12px }
    .stat{ border:1px solid var(--border); background:var(--surface); padding:14px; border-radius:var(--radius); text-align:center }
    .stat-num{ display:block; font-size: clamp(22px,4vw,30px); font-weight:800 }
    .stat-label{ color:var(--muted); font-size:14px }

    .icon-card{
      display:grid; place-items:center; border:1px solid var(--border);
      background: radial-gradient(600px 400px at 20% -10%, color-mix(in oklab, var(--brand) 12%, transparent) 0%, transparent 60%), var(--surface);
      border-radius:18px; height:220px; box-shadow:var(--shadow); font-size:56px; color:var(--brand)
    }

    /* Skills */
    .skills-grid{ display:grid; gap:16px; grid-template-columns:repeat(3,minmax(0,1fr)) }
    @media (max-width:900px){ .skills-grid{ grid-template-columns:1fr } }
    .skill-category{ border:1px solid var(--border); background:var(--surface); border-radius:var(--radius); padding:18px }
    .skill-title{ margin:0 0 12px; font-size:18px }
    .skill-items{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:10px; list-style:none; padding:0; margin:0 }
    .skill-item{ display:flex; align-items:center; gap:10px; padding:10px 10px; border:1px dashed var(--border); border-radius:12px; background: color-mix(in oklab, var(--surface), transparent 6%) }

    /* Projects */
    .projects-grid{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:16px; container-type:inline-size }
    @media (max-width:1100px){ .projects-grid{ grid-template-columns:repeat(2,minmax(0,1fr)) } }
    @media (max-width:680px){ .projects-grid{ grid-template-columns:1fr } }
    @container (max-width:480px){ .project-image{ height:150px } }
    .project-card{ border:1px solid var(--border); background:var(--surface); border-radius:16px; overflow:clip; display:grid; grid-template-rows:auto 1fr; min-height:100% }
    .project-image{ width:100%; height:180px; object-fit:cover; background:#0002 }
    .project-content{ padding:14px; display:grid; gap:6px }
    .project-title{ margin:4px 0 0; font-size:18px }
    .project-description{ margin:0 0 8px; color:var(--muted) }
    .project-link{ justify-self:start; text-decoration:none; color:#0b0c10; background: linear-gradient(135deg, var(--brand), var(--brand-2)); border-radius:10px; padding:8px 12px; font-weight:700; border:1px solid transparent }

    /* Contact */
    .contact-grid{ display:grid; grid-template-columns:1.1fr .9fr; gap: clamp(18px,4vw,36px) }
    @media (max-width:900px){ .contact-grid{ grid-template-columns:1fr } }
    .contact-methods{ list-style:none; padding:0; margin:16px 0 18px; display:grid; gap:10px }
    .contact-method{ display:grid; grid-template-columns:auto 1fr; gap:12px; align-items:start; border:1px solid var(--border); background:var(--surface); border-radius:12px; padding:12px }
    .contact-method i{ color:var(--brand) }

    .social-links{ display:flex; gap:10px; flex-wrap:wrap }
    .social-link{ width:40px; height:40px; display:grid; place-items:center; border-radius:10px; background: color-mix(in oklab, var(--surface), transparent 6%); border:1px solid var(--border); color:var(--text); text-decoration:none }

    .contact-form{ display:grid; gap:12px; border:1px solid var(--border); background:var(--surface); border-radius:16px; padding:16px }
    .form-group{ display:grid; gap:6px }
    label{ font-size:14px; color:var(--muted) }
    input, select, textarea{
      width:100%; padding:12px 12px; border-radius:10px; background: color-mix(in oklab, var(--surface), transparent 10%);
      border:1px solid var(--border); color:var(--text); outline:none
    }
    input:focus-visible, select:focus-visible, textarea:focus-visible{
      border-color: var(--brand);
      box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand) 40%, transparent);
    }
    .form-row{ display:grid; gap:12px; grid-template-columns:1fr 1fr }
    @media (max-width:560px){ .form-row{ grid-template-columns:1fr } }

    .form-note{ font-size:13px; color:var(--muted) }

    .form-status{
      display:none; border-radius:12px; padding:12px; border:1px solid var(--border); background: color-mix(in oklab, var(--surface), transparent 6%);
    }
    .form-status.success{ display:block; border-color:#1f8b4c; background: color-mix(in oklab, #1f8b4c 10%, var(--surface)); color:#e7ffef }
    .form-status.error{ display:block; border-color:#a13b3b; background: color-mix(in oklab, #a13b3b 10%, var(--surface)); color:#fff0f0 }

    /* Footer */
    .footer{ border-top:1px solid var(--border); padding:18px 0; text-align:center; color:var(--muted) }

    /* Motion */
    @media (prefers-reduced-motion: reduce){ *{ animation:none !important; transition:none !important } }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header" role="banner">
    <nav class="navbar" role="navigation" aria-label="Main">
      <a class="nav-logo" href="#home" aria-label="Go to home">Mir Moeez</a>

      <div class="nav-actions">
        <!-- Theme toggle (Auto → Dark → Light) -->
        <button id="theme-toggle" class="icon-btn" type="button" aria-pressed="false" aria-label="Toggle theme" title="Toggle theme">
          <i class="fa-solid fa-circle-half-stroke"></i>
        </button>

        <!-- Mobile menu toggle -->
        <button class="nav-toggle" type="button" aria-expanded="false" aria-controls="primary-menu" aria-label="Toggle menu">
          <span class="bar" aria-hidden="true"></span>
          <span class="bar" aria-hidden="true"></span>
          <span class="bar" aria-hidden="true"></span>
        </button>
      </div>

      <ul id="primary-menu" class="nav-menu">
        <li><a class="nav-link" href="#home">Home</a></li>
        <li><a class="nav-link" href="#about">About</a></li>
        <li><a class="nav-link" href="#skills">Skills</a></li>
        <li><a class="nav-link" href="#projects">Projects</a></li>
        <li><a class="nav-link" href="#contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main id="main">
    <!-- Hero -->
    <section id="home" class="hero section">
      <div class="container hero-grid">
        <div class="hero-content">
          <h1 class="hero-title">Hi, I'm <span class="highlight">Moeez</span></h1>
          <p class="hero-subtitle">Full Stack Developer & Problem Solver</p>
          <p class="hero-description">I build intuitive, accessible web experiences that solve real-world problems. I blend code with clarity and creativity.</p>
          <div class="hero-actions">
            <a class="btn btn-primary" href="resume.pdf" download>Download my Resume</a>
            <a class="btn btn-secondary" href="#contact">Get In Touch</a>
          </div>
        </div>
        <figure class="hero-figure">
          <img src="images/my.jpg" alt="Portrait of Mir Moeez" loading="lazy" width="480" height="480">
        </figure>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="section">
      <div class="container">
        <h2 class="section-title">About Me</h2>
        <div class="about-grid">
          <div>
            <p>I design and develop accessible, user-friendly websites and applications that solve practical problems. From fixing layout issues to writing clean, scalable code, I focus on building solutions that work—and teaching others how to do the same.</p>
            <p>I'm a passionate full-stack developer with experience in modern web technologies. I love creating user-friendly applications that make a difference in people's lives.</p>
            <ul class="stats">
              <li class="stat"><span class="stat-num">3+</span><span class="stat-label">Years Experience</span></li>
              <li class="stat"><span class="stat-num">15+</span><span class="stat-label">Projects Completed</span></li>
              <li class="stat"><span class="stat-num">5+</span><span class="stat-label">Technologies</span></li>
            </ul>
          </div>
          <div class="icon-card" aria-hidden="true"><i class="fas fa-code"></i></div>
        </div>
      </div>
    </section>

    <!-- Skills -->
    <section id="skills" class="section">
      <div class="container">
        <h2 class="section-title">Skills & Technologies</h2>
        <div class="skills-grid">
          <section class="skill-category">
            <h3 class="skill-title">Frontend</h3>
            <ul class="skill-items">
              <li class="skill-item"><i class="fab fa-html5" aria-hidden="true"></i><span>HTML5</span></li>
              <li class="skill-item"><i class="fab fa-css3-alt" aria-hidden="true"></i><span>CSS3</span></li>
              <li class="skill-item"><i class="fab fa-js" aria-hidden="true"></i><span>JavaScript</span></li>
              <li class="skill-item"><i class="fab fa-react" aria-hidden="true"></i><span>React</span></li>
              <li class="skill-item"><i class="fab fa-vuejs" aria-hidden="true"></i><span>Vue.js</span></li>
            </ul>
          </section>
          <section class="skill-category">
            <h3 class="skill-title">Backend</h3>
            <ul class="skill-items">
              <li class="skill-item"><i class="fab fa-node-js" aria-hidden="true"></i><span>Node.js</span></li>
              <li class="skill-item"><i class="fab fa-python" aria-hidden="true"></i><span>Python</span></li>
              <li class="skill-item"><i class="fas fa-database" aria-hidden="true"></i><span>MongoDB</span></li>
              <li class="skill-item"><i class="fas fa-server" aria-hidden="true"></i><span>Express.js</span></li>
              <li class="skill-item"><i class="fas fa-fire" aria-hidden="true"></i><span>Firebase</span></li>
            </ul>
          </section>
          <section class="skill-category">
            <h3 class="skill-title">Tools & Others</h3>
            <ul class="skill-items">
              <li class="skill-item"><i class="fab fa-git-alt" aria-hidden="true"></i><span>Git</span></li>
              <li class="skill-item"><i class="fab fa-github" aria-hidden="true"></i><span>GitHub</span></li>
              <li class="skill-item"><i class="fas fa-cloud" aria-hidden="true"></i><span>AWS</span></li>
              <li class="skill-item"><i class="fab fa-docker" aria-hidden="true"></i><span>Docker</span></li>
              <li class="skill-item"><i class="fas fa-mobile-alt" aria-hidden="true"></i><span>Responsive Design</span></li>
            </ul>
          </section>
        </div>
      </div>
    </section>

    <!-- Projects -->
    <section id="projects" class="section">
      <div class="container">
        <h2 class="section-title">Projects</h2>
        <div class="projects-grid">
          <article class="project-card">
            <img class="project-image" src="images/bin.png" alt="Basic ITI Notes website preview" loading="lazy" width="640" height="360">
            <div class="project-content">
              <h3 class="project-title">Basic ITI Notes</h3>
              <p class="project-description">Simplifying ITI learning—notes, assignments, and support in one place.</p>
              <a class="project-link" href="https://basicitinotes.netlify.app/" target="_blank" rel="noopener">View Project</a>
            </div>
          </article>
          <article class="project-card">
            <img class="project-image" src="images/ss.png" alt="Software Site preview" loading="lazy" width="640" height="360">
            <div class="project-content">
              <h3 class="project-title">Software Site</h3>
              <p class="project-description">A site for downloading software used in ITI courses.</p>
              <a class="project-link" href="https://thesoftwaresite.netlify.app/" target="_blank" rel="noopener">View Project</a>
            </div>
          </article>
          <article class="project-card">
            <img class="project-image" src="images/nn.png" alt="Neuroniche Academy preview" loading="lazy" width="640" height="360">
            <div class="project-content">
              <h3 class="project-title">Neuroniche Academy</h3>
              <p class="project-description">An innovative learning space built to empower curious minds.</p>
              <a class="project-link" href="https://neuroniche.netlify.app/" target="_blank" rel="noopener">View Project</a>
            </div>
          </article>
          <article class="project-card">
            <img class="project-image" src="images/iii.png" alt="Skyline Computers preview" loading="lazy" width="640" height="360">
            <div class="project-content">
              <h3 class="project-title">Skyline Computers</h3>
              <p class="project-description">A modern computer centre focused on practical skills and digital empowerment.</p>
              <a class="project-link" href="https://skyline-computer.netlify.app/" target="_blank" rel="noopener">View Project</a>
            </div>
          </article>
          <article class="project-card">
            <img class="project-image" src="images/gnd.png" alt="Games Network Direct preview" loading="lazy" width="640" height="360">
            <div class="project-content">
              <h3 class="project-title">Games Network Direct</h3>
              <p class="project-description">Your go-to hub for safe, speedy access to epic games.</p>
              <a class="project-link" href="https://gamesnetworkdirect.netlify.app/" target="_blank" rel="noopener">View Project</a>
            </div>
          </article>
          <article class="project-card">
            <img class="project-image" src="images/more.png" alt="Other projects preview" loading="lazy" width="640" height="360" style="object-fit:cover">
            <div class="project-content">
              <h3 class="project-title">Other Projects</h3>
              <p class="project-description">Explore experiments, utilities, and in-progress ideas.</p>
              <a class="project-link" href="https://projectmir.netlify.app/" target="_blank" rel="noopener">View Project</a>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="section">
      <div class="container">
        <h2 class="section-title">Get In Touch</h2>
        <div class="contact-grid">
          <div>
            <h3>Let's work together!</h3>
            <p>Always interested in new opportunities and meaningful projects. Reach out to collaborate or just say hello.</p>

            <ul class="contact-methods">
              <li class="contact-method">
                <i class="fas fa-envelope" aria-hidden="true"></i>
                <div>
                  <h4>Email</h4>
                  <p><a href="mailto:moeezmir2019@gmail.com">moeezmir2019@gmail.com</a></p>
                </div>
              </li>
              <li class="contact-method">
                <i class="fas fa-phone" aria-hidden="true"></i>
                <div>
                  <h4>Phone</h4>
                  <p><a href="tel:+917006172095">+91 7006172095</a></p>
                </div>
              </li>
              <li class="contact-method">
                <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                <div>
                  <h4>Rawalpora, Srinagar, 190015</h4>
                  <p>Kashmir</p>
                </div>
              </li>
            </ul>

            <div class="social-links" aria-label="Social links">
              <a class="social-link" href="https://github.com/moeezmir" aria-label="GitHub" target="_blank" rel="noopener"><i class="fab fa-github"></i></a>
              <a class="social-link" href="https://www.linkedin.com/in/mir-moeez-860b5b334" aria-label="LinkedIn" target="_blank" rel="noopener"><i class="fab fa-linkedin"></i></a>
              <a class="social-link" href="https://x.com/thypholosion" aria-label="X (Twitter)" target="_blank" rel="noopener"><i class="fab fa-x-twitter"></i></a>
              <a class="social-link" href="https://www.facebook.com/moeezmirI" aria-label="Facebook" target="_blank" rel="noopener"><i class="fab fa-facebook"></i></a>
              <a class="social-link" href="https://www.instagram.com/moeez_mir_" aria-label="Instagram" target="_blank" rel="noopener"><i class="fab fa-instagram"></i></a>
            </div>
          </div>

          <form id="contact-form" class="contact-form" action="https://api.web3forms.com/submit" method="POST" novalidate>
            <input type="hidden" name="access_key" value="91e2017f-e868-4f78-9d67-47fef7350fd6">

            <div class="form-row">
              <div class="form-group">
                <label for="name">Your Name</label>
                <input id="name" name="name" type="text" placeholder="Your Name" required />
              </div>
              <div class="form-group">
                <label for="email">Your Email</label>
                <input id="email" name="email" type="email" placeholder="you@example.com" required />
              </div>
            </div>

            <div class="form-group">
              <label for="subject">What’s this message about?</label>
              <select id="subject" name="subject" required>
                <option value="" disabled selected>Choose a subject...</option>
                <option>Frontend Development Collaboration</option>
                <option>Website Redesign Proposal</option>
                <option>Looking to Hire You for a Project</option>
                <option>Need Help Debugging My Site</option>
                <option>Interested in Learning HTML/CSS</option>
                <option>Request for Technical Guidance</option>
                <option>Issue with Portfolio Layout on Mobile</option>
                <option>Font Awesome Icons Not Displaying</option>
                <option>Just Saying Hello 👋</option>
                <option>Appreciate Your Work!</option>
              </select>
            </div>

            <div class="form-group">
              <label for="message">Your Message</label>
              <textarea id="message" name="message" placeholder="Write your message..." rows="5" required></textarea>
              <p class="form-note">By submitting, you agree to be contacted about your request.</p>
            </div>

            <div id="form-status" class="form-status" role="status" aria-live="polite"></div>

            <button id="submit-btn" type="submit" class="btn btn-primary">
              <span class="btn-text">Send Message</span>
            </button>
          </form>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer"><div class="container"><p>Built with ❤️ by Mir Moeez</p></div></footer>

  <script>
    // 2) Theme logic: Auto ↔ Dark ↔ Light, persist, reflect icon/pressed state
    (function(){
      const STORAGE_KEY = "theme-preference";
      const btn = document.getElementById("theme-toggle");
      const root = document.documentElement;

      function getStored(){ return localStorage.getItem(STORAGE_KEY) || "auto"; }
      function setStored(val){ localStorage.setItem(STORAGE_KEY, val); }

      function isDarkNow(pref){
        if (pref === "dark") return true;
        if (pref === "light") return false;
        // auto -> follow system
        return window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
      }

      function render(pref){
        root.setAttribute("data-theme", pref);
        const dark = isDarkNow(pref);
        btn.setAttribute("aria-pressed", String(dark));
        // Icon: half-circle for auto, sun for dark, moon for light
        btn.innerHTML = pref === "auto"
          ? '<i class="fa-solid fa-circle-half-stroke"></i>'
          : dark ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
      }

      function next(pref){
        // Cycle: auto -> dark -> light -> auto
        if (pref === "auto") return "dark";
        if (pref === "dark") return "light";
        return "auto";
      }

      let current = getStored();
      render(current);

      if (window.matchMedia){
        window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", () => {
          if (getStored() === "auto") render("auto");
        });
      }

      btn.addEventListener("click", () => {
        current = next(getStored());
        setStored(current);
        render(current);
      });
    })();

    // Mobile nav toggle
    (function(){
      const toggle = document.querySelector('.nav-toggle');
      const menu = document.getElementById('primary-menu');
      function setExpanded(expanded){
        toggle.setAttribute('aria-expanded', expanded);
        menu.classList.toggle('open', expanded);
      }
      toggle.addEventListener('click', () => {
        const isOpen = toggle.getAttribute('aria-expanded') === 'true';
        setExpanded(!isOpen);
      });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') setExpanded(false); });
      menu.addEventListener('click', (e) => { if (e.target.closest('a')) setExpanded(false); });
    })();

    // Async form submit with inline success/error message
    (function(){
      const form = document.getElementById('contact-form');
      const status = document.getElementById('form-status');
      const submitBtn = document.getElementById('submit-btn');
      const btnText = submitBtn.querySelector('.btn-text');

      function setLoading(loading){
        submitBtn.disabled = loading;
        btnText.textContent = loading ? "Sending..." : "Send Message";
      }

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        status.className = 'form-status';
        status.textContent = '';
        if (!form.checkValidity()){
          status.classList.add('error');
          status.textContent = 'Please complete all required fields correctly.';
          return;
        }
        setLoading(true);
        try{
          const formData = new FormData(form);
          const res = await fetch(form.action, { method: form.method, body: formData, headers: { Accept: "application/json" }});
          if (res.ok){
            form.reset();
            status.classList.add('success');
            status.textContent = 'Thanks! Your message has been sent. You will receive a confirmation shortly.';
          }else{
            status.classList.add('error');
            status.textContent = 'Sorry, something went wrong. Please try again in a moment.';
          }
        }catch(err){
          status.classList.add('error');
          status.textContent = 'Network error. Please check your connection and try again.';
        }finally{
          setLoading(false);
        }
      });
    })();
  </script>
</body>
</html>
